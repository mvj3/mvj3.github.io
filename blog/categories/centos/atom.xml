<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: CentOS | 世界的审美！]]></title>
  <link href="http://mvj3.github.io/blog/categories/centos/atom.xml" rel="self"/>
  <link href="http://mvj3.github.io/"/>
  <updated>2013-12-29T21:01:10+08:00</updated>
  <id>http://mvj3.github.io/</id>
  <author>
    <name><![CDATA[mvj3]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[解决yum错误Error: requested datatype primary not available]]></title>
    <link href="http://mvj3.github.io/2011/11/15/Fix-yum-Error-requested-datatype-primary-not-available/"/>
    <updated>2011-11-15T16:45:09+08:00</updated>
    <id>http://mvj3.github.io/2011/11/15/Fix-yum-Error-requested-datatype-primary-not-available</id>
    <content type="html"><![CDATA[<h2>服务器信息</h2>

<p><code>text
[mvj3@sdk2 ~]$ cat /proc/version
Linux version 2.6.18-194.el5 (mockbuild@ca-build10.us.oracle.com) (gcc version 4.1.2 20080704 (Red Hat 4.1.2-48)) #1 SMP Mon Mar 29 22:10:29 EDT 2010
</code></p>

<h2>出错信息</h2>

<p><code>text
[mvj3@sdk2 ~]$ sudo yum install gettext-devel httpd-devel openssl-devel zlib-devel gcc gcc-c++ curl-devel expat-devel gettext-devel mysql-server mysql-devel libevent-devel mysql-devel mysql pcre pcre-devel libxml2-devel sqlite-devel ruby-devel -y
Loaded plugins: security
Error: requested datatype primary not available
[mvj3@sdk2 ~]$ sudo yum upgrade
Loaded plugins: security
Error: requested datatype primary not available
</code></p>

<h2>解决方案</h2>

<p><code>text
[mvj3@sdk2 ~]$ sudo yum clean all
Loaded plugins: security
Cleaning up Everything
[mvj3@sdk2 ~]$ sudo rpm --rebuilddb
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS本地安装nokogiri]]></title>
    <link href="http://mvj3.github.io/2011/10/20/install-nokogiri-locally-on-centos/"/>
    <updated>2011-10-20T16:45:09+08:00</updated>
    <id>http://mvj3.github.io/2011/10/20/install-nokogiri-locally-on-centos</id>
    <content type="html"><![CDATA[<p>帮同事在一台centos上安装nokogiri，记载如下：</p>

<p>系统信息：</p>

<p><code>text
[root@localhost ~]# uname -a
Linux localhost.localdomain 2.6.18-194.el5 #1 SMP Fri Apr 2 14:58:14 EDT 2010 x86_64 x86_64 x86_64 GNU/Linux
[root@localhost ~]# cat /proc/version
Linux version 2.6.18-194.el5 (mockbuild@builder10.centos.org) (gcc version 4.1.2 20080704 (Red Hat 4.1.2-48)) #1 SMP Fri Apr 2 14:58:14 EDT 2010
</code></p>

<p>卸载并重新安装nokogiri依赖的C库：</p>

<p><code>bash
sudo yum remove -y libxml2-devel libxslt-devel
sudo yum install -y libxml2-devel libxslt-devel
</code></p>

<p>最近rubygems.org的在amazon的代码库索引源访问极慢，无奈只能把本地安装过的gems压缩包全部拷上去
scp /usr/local/rvm/gems/ree-1.8.7-2011.03/cache/*gem root@host:~/gems/
然后在服务器上执行 sudo gem i nokogiri-1.5.0.gem  -l 即可</p>

<p>测试代码如下，nokogiri已能正常解析HTML了</p>

<p><code>ruby
require 'rubygems'
%w[nokogiri open-uri].map &amp;method(:require)
resp = open("http://www.douban.com").read
puts Nokogiri::HTML(resp).css("body .article .content")
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS上sqlite3版本兼容问题]]></title>
    <link href="http://mvj3.github.io/2011/10/09/fix-sqlite3-version-compatibility-problem-on-centos/"/>
    <updated>2011-10-09T16:41:53+08:00</updated>
    <id>http://mvj3.github.io/2011/10/09/fix-sqlite3-version-compatibility-problem-on-centos</id>
    <content type="html"><![CDATA[<h2>问题</h2>

<p>sqlite3-ruby的1.3版本在CentOS不兼容，访问数据库时报如下错误：
/usr/local/ruby/ruby-enterprise-1.8.7-2011.03/bin/ruby: symbol lookup error: /usr/local/ruby/ruby-enterprise-1.8.7-2011.03/lib/ruby/gems/1.8/gems/sqlite3-1.3.4/lib/sqlite3/sqlite3_native.so: undefined symbol: sqlite3_open_v2</p>

<h2>解决方案</h2>

<p>退回到1.2.5版本， gem install sqlite3-ruby -v=1.2.5</p>

<h2>服务器相关配置信息</h2>

<p>$ uname -a
Linux fx-40 2.6.18-274.el5 #1 SMP Fri Jul 22 04:43:29 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux
$ rpm -qa | grep sqlite
sqlite-devel-3.3.6-5
sqlite-3.3.6-5
sqlite-3.3.6-5
python-sqlite-1.1.7-1.2.1
sqlite-devel-3.3.6-5</p>

<h2>参考</h2>

<p><a href="http://railsforum.com/viewtopic.php?id=39585">http://railsforum.com/viewtopic.php?id=39585</a></p>
]]></content>
  </entry>
  
</feed>
